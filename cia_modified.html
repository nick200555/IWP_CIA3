<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CHRIST University - Research & Publications ERP</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fade-in {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fade-in 1.2s ease forwards; }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .section {
      display: none;
    }
    .sidebar {
      position: sticky;
      top: 20px;
      height: 100vh;
      overflow-y: auto;
    }
    .sidebar .nav-link {
      text-align: left;
      border-radius: 5px;
      margin-bottom: 5px;
    }
    .sidebar .nav-link.active {
      background-color: #0d6efd;
      color: white !important;
      font-weight: bold;
    }
    .main-content {
      padding-left: 20px;
    }
    @media (max-width: 992px) {
      .sidebar {
        height: auto;
        position: relative;
        margin-bottom: 20px;
      }
      .main-content {
        padding-left: 0;
      }
    }
  </style>
</head>
<body class="min-h-screen font-sans bg-gray-50 text-gray-900">

<!-- Header -->
<div id="miniHeaderBar" class="fixed top-0 left-0 w-full bg-blue-900 text-white z-50 flex items-center justify-between px-6 h-20 shadow-md">
  <div class="flex items-center space-x-3">
    <img src="CHRIST-Logo-New.jpg" alt="Logo" class="w-18 h-16 object-contain">
    <span class="font-semibold text-lg">DEPARTMENT OF AIML & DATA SCIENCE</span>
    <div>
      <span class="me-3"></span>
      <a href="login.html" class="btn btn-light btn-sm">Logout</a>
    </div>
  </div>
</div>

<!-- Hero Section -->
<header class="relative h-screen flex items-center justify-center text-center text-white overflow-hidden">
  <video autoplay muted loop playsinline class="absolute inset-0 w-full h-full object-cover">
    <source src="video.mp4" type="video/mp4" />
  </video>
  <div class="absolute inset-0 bg-black/50"></div>
  <div class="relative z-10 container mx-auto px-6">
    <h1 class="text-4xl md:text-5xl font-bold mb-3 animate-fade-in">CHRIST (Deemed to be University)</h1>
    <h2 class="text-2xl md:text-3xl font-semibold mb-6 animate-fade-in">Research & Publications ERP</h2>
    <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 animate-fade-in text-gray-100">
      Advancing knowledge through innovative research, groundbreaking publications,
      and transformative academic excellence.
    </p>
  </div>
</header>

<div class="container-fluid">
  <div class="row">
    <!-- Sidebar Navigation -->
    <div class="col-lg-3 col-md-4 sidebar bg-light p-3">
      <h4 class="mb-4 text-primary" style="text-align: center">RESEARCH ERP</h4>
      <nav class="nav flex-column" style="background-color: rgb(18, 4, 8)">
        <button class="btn btn-outline-primary nav-link active" data-target="externalFunded">External Funded Projects</button>
        <button class="btn btn-outline-primary nav-link" data-target="booksPublications">Books & Publications</button>
        <button class="btn btn-outline-primary nav-link" data-target="articles">Research Articles & Journals</button>
        <button class="btn btn-outline-primary nav-link" data-target="conferences">Seminars / Conferences</button>
        <button class="btn btn-outline-primary nav-link" data-target="workshops">Workshops / FDP / QIP / MOOC</button>
        <button class="btn btn-outline-primary nav-link" data-target="awards">Awards & Achievements</button>
        <button class="btn btn-outline-primary nav-link" data-target="patents">Patents</button>
        <button class="btn btn-outline-primary nav-link" data-target="viewProjects">View Saved Projects</button>
      </nav>
    </div>

    <!-- Main Content -->
    <div class="col-lg-9 col-md-8 main-content p-4">
      <!-- External Funded Projects Form -->
      <section id="externalFunded" class="section">
        <h3 class="mb-3">External Funded Research Project</h3>
        <form id="projectForm" onsubmit="saveProject(event)">
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Title of the Fund</label>
            <div class="col-sm-9"><input type="text" class="form-control" required></div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Date Received</label>
            <div class="col-sm-9"><input type="date" class="form-control" required></div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Principal Investigator</label>
            <div class="col-sm-9"><input type="text" class="form-control" required></div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Co-Principal Investigator</label>
            <div class="col-sm-9"><input type="text" class="form-control"></div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Amount Received (‚Çπ)</label>
            <div class="col-sm-9"><input type="number" class="form-control" step="0.01" required></div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Funding Agency Name</label>
            <div class="col-sm-9"><input type="text" class="form-control" required></div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-3 col-form-label">Government / Non-Government</label>
            <div class="col-sm-9">
              <select class="form-select" required>
                <option disabled selected value="">Choose...</option>
                <option>Government</option>
                <option>Non-Government</option>
              </select>
            </div>
          </div>
          <div class="row mb-4">
            <label class="col-sm-3 col-form-label">Document Proof</label>
            <div class="col-sm-9"><input type="file" class="form-control" accept="application/pdf,image/*"></div>
          </div>
          <button type="submit" class="btn btn-success">Save Project</button>
        </form>
      </section>

      <!-- View Projects -->
      <section id="viewProjects" class="section">
        <h3 class="mb-3">Saved External Funded Projects</h3>

        <!-- Action Buttons -->
        <div class="mb-3">
          <button class="btn btn-primary btn-sm me-2" onclick="downloadProjects()">‚¨áÔ∏è Download CSV</button>
          <button class="btn btn-secondary btn-sm" onclick="printProjects()">üñ®Ô∏è Print</button>
        </div>

        <div class="table-responsive">
          <table class="table table-bordered table-striped" id="projectTable">
            <thead class="table-primary">
              <tr>
                <th>Title of the Fund</th>
                <th>Date Received</th>
                <th>Principal Investigator</th>
                <th>Co-PI</th>
                <th>Amount (‚Çπ)</th>
                <th>Agency</th>
                <th>Type</th>
              </tr>
            </thead>
            <tbody id="projectTableBody">
              <tr>
                <td colspan="7" class="text-center">No data available. (Data integration pending)</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
</div>

<!-- Bootstrap & Custom Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Save project to localStorage
  function saveProject(event) {
    event.preventDefault();

    const form = document.getElementById('projectForm');
    const data = {
      title: form.querySelectorAll('input[type="text"]')[0].value,
      date: form.querySelectorAll('input[type="date"]')[0].value,
      pi: form.querySelectorAll('input[type="text"]')[1].value,
      coPi: form.querySelectorAll('input[type="text"]')[2].value,
      amount: form.querySelector('input[type="number"]').value,
      agency: form.querySelectorAll('input[type="text"]')[3].value,
      type: form.querySelector('select').value
    };

    let projects = JSON.parse(localStorage.getItem('projects')) || [];
    projects.push(data);
    localStorage.setItem('projects', JSON.stringify(projects));

    alert('Project saved!');
    form.reset();
  }

  // Show projects from localStorage
  document.querySelector('[data-target="viewProjects"]').addEventListener('click', () => {
    const projects = JSON.parse(localStorage.getItem('projects')) || [];
    const tbody = document.getElementById('projectTableBody');

    if (projects.length === 0) {
      tbody.innerHTML = `<tr><td colspan="7" class="text-center">No data available.</td></tr>`;
      return;
    }

    tbody.innerHTML = '';
    projects.forEach(proj => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${proj.title}</td>
        <td>${proj.date}</td>
        <td>${proj.pi}</td>
        <td>${proj.coPi}</td>
        <td>${proj.amount}</td>
        <td>${proj.agency}</td>
        <td>${proj.type}</td>
      `;
      tbody.appendChild(row);
    });
  });

  // Section switching
  const buttons = document.querySelectorAll('[data-target]');
  const sections = document.querySelectorAll('.section');
  function showSection(id, element) {
    sections.forEach(sec => sec.style.display = 'none');
    document.getElementById(id).style.display = 'block';
    buttons.forEach(btn => btn.classList.remove('active'));
    if (element) element.classList.add('active');
    else document.querySelector(`[data-target="${id}"]`).classList.add('active');
  }
  buttons.forEach(btn => btn.addEventListener('click', function() {
    showSection(this.dataset.target, this);
  }));

  // Download table as CSV
  function downloadProjects() {
    const rows = document.querySelectorAll("#projectTable tr");
    let csv = [];
    rows.forEach(row => {
      let cols = row.querySelectorAll("td, th");
      let rowData = [];
      cols.forEach(col => rowData.push(`"${col.innerText}"`));
      csv.push(rowData.join(","));
    });
    const blob = new Blob([csv.join("\n")], { type: "text/csv" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "projects.csv";
    link.click();
  }

  // Print table
  function printProjects() {
    const tableContent = document.getElementById("projectTable").outerHTML;
    const newWin = window.open("");
    newWin.document.write(`
      <html>
        <head>
          <title>Saved Projects</title>
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        </head>
        <body>
          <h3 class="text-center my-3">Saved External Funded Projects</h3>
          ${tableContent}
        </body>
      </html>
    `);
    newWin.document.close();
    newWin.print();
  }
</script>

<!-- Footer -->
<footer class="bg-blue-900 text-white py-12">
  <div class="container mx-auto px-6 grid md:grid-cols-3 gap-8 text-center md:text-left">
    <div>
      <h4 class="font-semibold text-lg mb-3">About Us</h4>
      <p class="text-gray-300 text-sm">
        CHRIST University fosters academic excellence and innovation through impactful research and publications.
      </p>
    </div>
    <div>
      <h4 class="font-semibold text-lg mb-3">Contact</h4>
      <p class="text-gray-300 text-sm">Bengaluru, India</p>
      <p class="text-gray-300 text-sm">research@christuniversity.in</p>
    </div>
  </div>
  <div class="mt-8 text-center text-gray-400 text-sm border-t border-white/20 pt-6">
    ¬© 2025 CHRIST University - Department of Research & Innovation
  </div>
</footer>

</body>
</html>
